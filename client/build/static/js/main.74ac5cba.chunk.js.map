{"version":3,"sources":["views/footer/Footer.jsx","views/footer/index.js","views/header/Header.jsx","views/header/index.js","views/hero/Hero.jsx","views/hero/index.js","views/modal/Modal.jsx","components/callBox/CallBoxView.jsx","components/callBox/CallBoxContainer.jsx","components/callBox/index.js","components/home/HomeView.jsx","components/home/HomeContainer.jsx","components/home/index.js","components/liveChat/LiveChatView.jsx","components/liveChat/LiveChatContainer.jsx","components/liveChat/index.js","routes/Routes.jsx","routes/index.js","components/app/App.jsx","components/app/index.js","index.js"],"names":["Footer","className","Header","src","frameBorder","scrolling","width","height","title","Hero","Modal","handleModalAction","props","createPortal","onClick","e","target","closest","children","document","querySelector","CallBoxView","fields","handleChange","handleClick","isModalOpen","handleModalClose","name","value","friendID","onChange","placeholder","type","CallBoxContainer","useState","setfields","setisModalOpen","history","useHistory","newFields","preventDefault","push","pathname","search","HomeView","buttonClicked","id","aria-hidden","HomeContainer","setbuttonClicked","LiveChatView","userVideo","partnerVideo","modalMessage","modalVisible","receivingCall","acceptCall","rejectCall","callAccepted","callRejected","caller","yourID","error","ref","srcObject","autoPlay","controls","muted","color","timeout","LiveChatContainer","URLSearchParams","location","get","setuserVideo","setpartnerVideo","seterror","setYourID","users","setUsers","setReceivingCall","setCaller","callerSignal","setCallerSignal","setCallAccepted","setCallRejected","setModalVisible","setModalMessage","socket","useRef","myPeer","a","navigator","mediaDevices","getUserMedia","audio","video","stream","peer","Peer","initiator","trickle","config","iceServers","urls","username","credential","current","on","data","emit","userToCall","signalData","from","err","endCall","signal","window","reload","to","destroy","useEffect","io","connect","yourid","Object","keys","length","callPeer","Routes","path","exact","component","Home","LiveChat","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.74ac5cba.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nimport './footer.css';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <div className=\"footer\">\r\n      <div className=\"footer__content\">\r\n        <div className=\"footer__info\">\r\n          You need to allow access to video and audio to place calls. <br /> Facetime is fully Open\r\n          Source and does not store any data on its servers.\r\n        </div>\r\n        <div className=\"footer__credits\">Made with ❤️ by Tanuj Choudhary</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import Footer from './Footer';\r\n\r\nexport default Footer;\r\n","import React from 'react';\n\nimport './header.css';\n\nfunction Header() {\n  return (\n    <div className=\"header__wrapper\">\n      <header className=\"header\">\n        <div className=\"header__left\">\n          <div className=\"header__brand__image__wrapper\">\n            <i className=\"fas fa-phone-alt header__brand__image\"></i>\n          </div>\n\n          <div className=\"header__brand__name\">FaceTime</div>\n        </div>\n        <div className=\"header__right\">\n          <iframe\n            src=\"https://ghbtns.com/github-btn.html?user=Tanuj-Choudhary&repo=facetime&type=star&size=large\"\n            frameBorder=\"0\"\n            scrolling=\"0\"\n            width=\"90\"\n            height=\"30\"\n            title=\"GitHub\"\n          ></iframe>\n        </div>\n      </header>\n    </div>\n  );\n}\n\nexport default Header;\n","import Header from './Header';\n\nexport default Header;\n","import React from 'react';\n\nimport './hero.css';\n\nfunction Hero() {\n  return (\n    <div className=\"container hero-container\">\n      <div className=\"hero__welcome__text\">Anonymous Video Calls</div>\n      <div className=\"hero__description__text\">across the world for free</div>\n      <div className=\"hero__action__text\">Create a call or Join a call</div>\n    </div>\n  );\n}\n\nexport default Hero;\n","import Hero from './Hero';\n\nexport default Hero;\n","import React from 'react';\nimport { createPortal } from 'react-dom';\n\nimport './modal.css';\n\nconst Modal = ({ handleModalAction, ...props }) => {\n  const handleModalOutsideClick = (e) => {\n    // Clicked on modal\n    if (e.target.closest('.modal__body')) {\n      return;\n    }\n\n    // Clicked outside modal\n    handleModalAction();\n  };\n\n  return createPortal(\n    <div onClick={handleModalOutsideClick} className=\"modal\">\n      <div className=\"overlay\"></div>\n      <div className=\"modal__body\">\n        {props.children}\n        <span className=\"close-modal\" onClick={handleModalAction}>\n          X\n        </span>\n      </div>\n    </div>,\n    document.querySelector('#modal'),\n  );\n};\n\nexport default Modal;\n","import React from 'react';\nimport Modal from '../../views/modal/Modal';\n\nimport './callBox.css';\n\nfunction CallBoxView({ fields, handleChange, handleClick, isModalOpen, handleModalClose }) {\n  return (\n    <>\n      <div className=\"callBox\">\n        {isModalOpen && (\n          <Modal handleModalAction={handleModalClose}>\n            <h1 className=\"callbox__modal\">Please enter a ID</h1>\n          </Modal>\n        )}\n        <input\n          name=\"friendID\"\n          value={fields.friendID}\n          onChange={handleChange}\n          placeholder=\"Friend ID\"\n          type=\"text\"\n          className=\"input__id\"\n        />\n        <button onClick={handleClick} className=\"call-btn\">\n          Call\n        </button>\n      </div>\n\n      <div className=\"callbox__text\">\n        To call your friend, ask them to open <span>facetime</span> in their browser.\n        <br /> Send your ID and wait for their call <span>OR</span> enter their ID and hit call!\n      </div>\n    </>\n  );\n}\n\nexport default CallBoxView;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport CallBoxView from './CallBoxView';\n\nfunction CallBoxContainer() {\n  const [fields, setfields] = useState({ friendID: '' });\n  const [isModalOpen, setisModalOpen] = useState(false);\n\n  const history = useHistory();\n\n  // Handling call button\n  const handleClick = (e) => {\n    e.preventDefault();\n    const { friendID } = fields;\n\n    // Empty id show modal\n    if (friendID === '') {\n      setisModalOpen(true);\n      return;\n    }\n\n    // Valid ID Go to rooms/:id\n    history.push({ pathname: '/rooms', search: `?id=${friendID}` });\n  };\n\n  // Controlling input\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    const newFields = { ...fields, [name]: value };\n\n    setfields(newFields);\n  };\n\n  const handleModalClose = () => {\n    setisModalOpen(false);\n  };\n\n  return (\n    <CallBoxView\n      fields={fields}\n      handleChange={handleChange}\n      handleClick={handleClick}\n      isModalOpen={isModalOpen}\n      handleModalClose={handleModalClose}\n    />\n  );\n}\n\nexport default CallBoxContainer;\n","import CallBoxContainer from './CallBoxContainer';\n\nexport default CallBoxContainer;\n","import React from 'react';\nimport Footer from '../../views/footer';\n\nimport Header from '../../views/header';\nimport Hero from '../../views/hero';\nimport CallBox from '../callBox';\nimport './homeView.css';\n\nfunction HomeView({ handleClick, buttonClicked }) {\n  const renderButtons = () => {\n    return (\n      <div className=\"home__btns\">\n        <button id=\"start\" onClick={handleClick} className=\"btn home__create-btn\">\n          <i className=\"fa fa-video-camera video__icon\" aria-hidden=\"true\"></i>Start a call\n        </button>\n        <button id=\"join\" onClick={handleClick} className=\"btn home__join-btn\">\n          <i className=\"fas fa-user-friends friends__icon\"></i>Join a call\n        </button>\n      </div>\n    );\n  };\n\n  const renderHelper = () => {\n    if (!buttonClicked) {\n      return renderButtons();\n    } else if (buttonClicked === 'join') {\n      return <CallBox />;\n    }\n    return null;\n  };\n\n  return (\n    <div>\n      <Header />\n      <Hero />\n      {renderHelper()}\n      <Footer />\n    </div>\n  );\n}\n\nexport default HomeView;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport HomeView from './HomeView';\n\nfunction HomeContainer() {\n  const [buttonClicked, setbuttonClicked] = useState(null);\n\n  const history = useHistory();\n\n  const handleClick = (e) => {\n    const id = e.target.closest('.btn').id;\n\n    // Start button clicked\n    if (id === 'start') {\n      history.push(`rooms`);\n    }\n\n    // Join button clicked\n    setbuttonClicked(id);\n  };\n\n  return <HomeView handleClick={handleClick} buttonClicked={buttonClicked} />;\n}\n\nexport default HomeContainer;\n","import HomeContainer from './HomeContainer';\n\nexport default HomeContainer;\n","import React from 'react';\r\nimport Modal from '../../views/modal/Modal';\r\nimport Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\nimport './liveChat.css';\r\n\r\nfunction LiveChatView({\r\n  userVideo,\r\n  partnerVideo,\r\n  modalMessage,\r\n  modalVisible,\r\n  handleModalAction,\r\n  receivingCall,\r\n  acceptCall,\r\n  rejectCall,\r\n  callAccepted,\r\n  callRejected,\r\n  caller,\r\n  yourID,\r\n  error,\r\n}) {\r\n  const renderErrorModal = () => {\r\n    if (modalVisible) {\r\n      return (\r\n        <Modal handleModalAction={handleModalAction}>\r\n          <h1 className=\"callbox__modal\">{modalMessage}</h1>\r\n        </Modal>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const renderCallModal = () => {\r\n    if (receivingCall && !callAccepted && !callRejected) {\r\n      return (\r\n        <Modal handleModalAction={rejectCall}>\r\n          <h1 className=\"call__modal__heading\">{caller} is calling you</h1>\r\n          <div className=\"call__modal__btns\">\r\n            <button onClick={acceptCall} className=\"accept-btn\">\r\n              <i className=\"fa fa-check call__modal__btns__icon\"></i>\r\n              Accept call\r\n            </button>\r\n            <button onClick={rejectCall} className=\"reject-btn\">\r\n              <i className=\"fa fa-close call__modal__btns__icon\"></i>\r\n              Reject call\r\n            </button>\r\n          </div>\r\n        </Modal>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const renderVideos = () => {\r\n    if (userVideo !== null || partnerVideo !== null) {\r\n      return (\r\n        <div className=\"videoboxes\">\r\n          <div className=\"videobox videobox__partner\">\r\n            <video\r\n              ref={(ref) => {\r\n                if (ref) {\r\n                  ref.srcObject = partnerVideo;\r\n                }\r\n              }}\r\n              autoPlay={true}\r\n              controls\r\n              className=\"video__partner\"\r\n              width=\"350\"\r\n              height=\"300\"\r\n            >\r\n              Sorry, your browser doesn't support embedded videos.\r\n            </video>\r\n          </div>\r\n\r\n          <div className=\"videobox videobox__user\">\r\n            <video\r\n              ref={(ref) => {\r\n                if (ref) {\r\n                  ref.srcObject = userVideo;\r\n                }\r\n              }}\r\n              autoPlay={true}\r\n              controls\r\n              width=\"100\"\r\n              height=\"100\"\r\n              muted\r\n            >\r\n              Sorry, your browser doesn't support embedded videos.\r\n            </video>\r\n          </div>\r\n        </div>\r\n      );\r\n    } else if (!error) {\r\n      return (\r\n        <div className=\"center\">\r\n          <Loader\r\n            type=\"Oval\"\r\n            color=\"#02caca\"\r\n            height={100}\r\n            width={100}\r\n            timeout={60000} //60 secs\r\n          />\r\n          <span className=\"loading__text\">\r\n            Waiting for <br /> someone to join\r\n          </span>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat__page\">\r\n      <div className=\"my__id\">\r\n        Your username: <span>{yourID}</span>\r\n      </div>\r\n      {renderErrorModal()}\r\n      {renderCallModal()}\r\n      {renderVideos()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LiveChatView;\r\n","/* eslint-disable no-unused-vars */\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport LiveChatView from './LiveChatView';\r\nimport io from 'socket.io-client';\r\nimport Peer from 'simple-peer';\r\n\r\nfunction LiveChatContainer(props) {\r\n  const id = new URLSearchParams(props.location.search).get('id') || null;\r\n\r\n  // Video state\r\n  const [userVideo, setuserVideo] = useState(null);\r\n  const [partnerVideo, setpartnerVideo] = useState(null);\r\n\r\n  // Error  state\r\n  const [error, seterror] = useState(null);\r\n\r\n  // Call and user  state\r\n  const [yourID, setYourID] = useState('');\r\n  const [users, setUsers] = useState({});\r\n  const [receivingCall, setReceivingCall] = useState(false);\r\n  const [caller, setCaller] = useState('');\r\n  const [callerSignal, setCallerSignal] = useState();\r\n  const [callAccepted, setCallAccepted] = useState(false);\r\n  const [callRejected, setCallRejected] = useState(false);\r\n\r\n  // Modal state\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [modalMessage, setModalMessage] = useState('');\r\n\r\n  // Socket and peer ref\r\n  const socket = useRef(null);\r\n  const myPeer = useRef();\r\n\r\n  useEffect(() => {\r\n    // Only run if not connected\r\n    if (!socket.current) {\r\n      socket.current = io.connect('/');\r\n\r\n      socket.current.on('yourID', (yourid) => {\r\n        setYourID(yourid);\r\n      });\r\n    }\r\n\r\n    // Get all users\r\n    socket.current.on('allUsers', (users) => {\r\n      setUsers(users);\r\n    });\r\n\r\n    socket.current.on('hey', (data) => {\r\n      setReceivingCall(true);\r\n      setCaller(data.from);\r\n      setCallerSignal(data.signal);\r\n    });\r\n\r\n    /**\r\n     * If there is caller\r\n     * Your id is rendered or loaded\r\n     * More than 1 user is connected\r\n     */\r\n    if (id && yourID !== '' && Object.keys(users).length > 1) {\r\n      callPeer(id);\r\n    }\r\n  }, [id, yourID, users]);\r\n\r\n  const handleModalAction = () => {\r\n    setModalVisible(false);\r\n  };\r\n\r\n  async function callPeer(id) {\r\n    if (id !== '' && users[id] && id !== yourID) {\r\n      try {\r\n        const stream = await navigator.mediaDevices.getUserMedia({ audio: true, video: true });\r\n\r\n        setCaller(id);\r\n        setuserVideo(stream);\r\n\r\n        const peer = new Peer({\r\n          initiator: true,\r\n          trickle: false,\r\n          config: {\r\n            iceServers: [\r\n              {\r\n                urls: 'stun:numb.viagenie.ca',\r\n                username: 'sultan1640@gmail.com',\r\n                credential: '98376683',\r\n              },\r\n              {\r\n                urls: 'turn:numb.viagenie.ca',\r\n                username: 'sultan1640@gmail.com',\r\n                credential: '98376683',\r\n              },\r\n            ],\r\n          },\r\n          stream: stream,\r\n        });\r\n\r\n        myPeer.current = peer;\r\n\r\n        peer.on('signal', (data) => {\r\n          socket.current.emit('callUser', { userToCall: id, signalData: data, from: yourID });\r\n        });\r\n\r\n        peer.on('stream', (stream) => {\r\n          setpartnerVideo(stream);\r\n        });\r\n\r\n        peer.on('error', (err) => {\r\n          endCall();\r\n        });\r\n\r\n        socket.current.on('callAccepted', (signal) => {\r\n          setCallAccepted(true);\r\n          peer.signal(signal);\r\n        });\r\n\r\n        socket.current.on('close', () => {\r\n          window.location.reload();\r\n        });\r\n\r\n        socket.current.on('rejected', () => {\r\n          window.location.reload();\r\n        });\r\n      } catch (err) {\r\n        setModalMessage(\r\n          'You cannot place/ receive a call without granting video and audio permissions! Please change your settings to use FaceTime.',\r\n        );\r\n        setModalVisible(true);\r\n        seterror(true);\r\n      }\r\n    } else {\r\n      setModalMessage('We think the username entered is wrong. Please check again and retry!');\r\n      setModalVisible(true);\r\n      seterror(true);\r\n      return;\r\n    }\r\n  }\r\n\r\n  async function acceptCall() {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true, video: true });\r\n\r\n      setuserVideo(stream);\r\n      setCallAccepted(true);\r\n      const peer = new Peer({\r\n        initiator: false,\r\n        trickle: false,\r\n        stream: stream,\r\n      });\r\n\r\n      myPeer.current = peer;\r\n\r\n      peer.on('signal', (data) => {\r\n        socket.current.emit('acceptCall', { signal: data, to: caller });\r\n      });\r\n\r\n      peer.on('stream', (stream) => {\r\n        setpartnerVideo(stream);\r\n      });\r\n\r\n      peer.on('error', (err) => {\r\n        endCall();\r\n      });\r\n\r\n      peer.signal(callerSignal);\r\n\r\n      socket.current.on('close', () => {\r\n        window.location.reload();\r\n      });\r\n    } catch (err) {\r\n      setModalMessage(\r\n        'You cannot place/ receive a call without granting video and audio permissions! Please change your settings to use Cuckoo.',\r\n      );\r\n      setModalVisible(true);\r\n      seterror(true);\r\n    }\r\n  }\r\n\r\n  function rejectCall() {\r\n    setCallRejected(true);\r\n    socket.current.emit('rejected', { to: caller });\r\n    window.location.reload();\r\n  }\r\n\r\n  function endCall() {\r\n    myPeer.current.destroy();\r\n    socket.current.emit('close', { to: caller });\r\n    window.location.reload();\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <LiveChatView\r\n        userVideo={userVideo}\r\n        partnerVideo={partnerVideo}\r\n        modalMessage={modalMessage}\r\n        modalVisible={modalVisible}\r\n        handleModalAction={handleModalAction}\r\n        receivingCall={receivingCall}\r\n        acceptCall={acceptCall}\r\n        rejectCall={rejectCall}\r\n        callAccepted={callAccepted}\r\n        callRejected={callRejected}\r\n        caller={caller}\r\n        yourID={yourID}\r\n        error={error}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LiveChatContainer;\r\n","import LiveChatContainer from './LiveChatContainer';\r\n\r\nexport default LiveChatContainer;\r\n","import React from 'react';\nimport { HashRouter, Switch, Route } from 'react-router-dom';\nimport Home from '../components/home';\nimport LiveChat from '../components/liveChat';\n\nfunction Routes() {\n  return (\n    <>\n      <HashRouter>\n        <Switch>\n          <Route path=\"/\" exact component={Home} />\n          <Route path=\"/rooms\" exact component={LiveChat} />\n        </Switch>\n      </HashRouter>\n    </>\n  );\n}\n\nexport default Routes;\n","import Routes from './Routes';\n\nexport default Routes;\n","import React from 'react';\nimport Routes from '../../routes';\n\nimport './app.css';\n\nfunction App() {\n  return <Routes />;\n}\n\nexport default App;\n","import App from './App';\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './components/app/index';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}